<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Đang xem: Trực tiếp bóng đá - MYSOCCER</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/artplayer/dist/artplayer.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <style>
        body { background-color: #141516; color: white; }
        .video-container { aspect-ratio: 16/9; background: #000; }
        .ad-slot { background: #1f2937; border: 1px dashed #4b5563; text-align: center; color: #9ca3af; }
    </style>
</head>
<body>
    <header class="bg-[#0a0a0a] border-b border-yellow-400 p-4">
        <div class="container mx-auto">
            <a href="index.html" class="text-2xl font-bold text-yellow-400">MY<span class="text-white">SOCCER</span></a>
        </div>
    </header>

    <main class="container mx-auto p-4">
        <div class="flex flex-col lg:flex-row gap-6">
            
            <div class="lg:w-2/3 flex flex-col gap-4">
                <div class="ad-slot p-2 h-20 rounded"> [BANNER QUẢNG CÁO CỦA BẠN - 728x90] </div>

                <div id="video-player" class="video-container rounded-lg overflow-hidden shadow-2xl"></div>

                <div class="bg-white text-black p-4 rounded-lg flex justify-between items-center">
                    <div id="match-info" class="font-bold text-lg">Đang tải thông tin trận đấu...</div>
                    <div class="flex gap-2">
                        <button class="bg-red-600 text-white px-4 py-1 rounded text-sm font-bold animate-pulse">LIVE</button>
                    </div>
                </div>

                <div class="ad-slot p-4 h-32 rounded"> [BANNER QUẢNG CÁO CỦA BẠN - TĂNG DOANH THU] </div>
            </div>

            <div class="lg:w-1/3 flex flex-col gap-4">
                <div class="bg-gray-900 rounded-lg overflow-hidden border border-gray-700 h-[500px]">
                    <div class="bg-gray-800 p-3 font-bold border-b border-gray-700 text-yellow-400">PHÒNG CHAT SÔI NỔI</div>
                    <iframe id="chat-frame" src="" class="w-full h-full border-0"></iframe>
                </div>
                
                <div class="ad-slot p-4 h-60 rounded"> [QUẢNG CÁO DỌC SIDEBAR] </div>
            </div>
        </div>
    </main>

    <script>
        // 1. Lấy Match ID từ URL (?id=...)
        const urlParams = new URLSearchParams(window.location.search);
        const matchId = urlParams.get('id');

        if (!matchId) {
            window.location.href = 'index.html';
        }

        // 2. Cấu hình khung Chat
        document.getElementById('chat-frame').src = `https://ls01.tv/embed-chat/${matchId}`;

        // 3. Khởi tạo Trình phát Video (ArtPlayer)
        // Lưu ý: Link m3u8 thực tế thường có dạng: https://cdn.../matchId/index.m3u8
        // Ở đây ta dùng một link placeholder, bạn cần logic lấy link thật từ API ở bước trước.
        const art = new ArtPlayer({
            container: '#video-player',
            url: `https://vips-stream.akamaized.net/live/${matchId}/playlist.m3u8`, // Cấu trúc link CDN phổ biến
            type: 'm3u8',
            customType: {
                m3u8: function (video, url) {
                    if (Hls.isSupported()) {
                        const hls = new Hls();
                        hls.loadSource(url);
                        hls.attachMedia(video);
                    } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
                        video.src = url;
                    }
                },
            },
            autoSize: true,
            fullscreen: true,
            autoplay: true,
            volume: 0.7,
            setting: true,
        });

        // Tải thông tin trận đấu để hiển thị tiêu đề (Giả lập fetch từ API)
        document.getElementById('match-info').innerText = "Trận đấu ID: " + matchId;
    </script>
</body>
</html>